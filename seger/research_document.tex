\documentclass{article}
\usepackage{import}

% Define the version command
\makeatletter
\newcommand{\version}[1]{\def\@version{#1}}
\makeatother

\title{Research Document}
\author{Seger Sars}
\date{\today}
\version{0.1}

\input{../together/document_template.tex}

\begin{document}

\maketitle

\newpage

\noindent \textbf{Client:}\\
Topic Embedded Systems\\
Engineering department\\
Materiaalweg 4, 5681 RJ Best\\
+31 499336979\\

\vspace{1em}

\noindent \textbf{Company Supervisor:}\\
Dirk van den Heuvel\\
dirk.van.den.heuvel@topic.nl\\
Position: Product Manager and Principal Consultant at TOPIC Embedded Systems\\
\\
and\\
\\
Britta Claes\\
britta.claes@topic.nl\\
Position: Business Manager, People Manager, and Account Manager

\vspace{1em}

\noindent \textbf{Educational Institution:}\\
Avans University of Applied Sciences\\
Academy for Industry and Informatics\\
Onderwijsboulevard 215\\
5223 DE 's-Hertogenbosch

\vspace{1em}

\noindent \textbf{Academic Supervisor:}\\
Arthur Kluitmans\\
atjm.kluitmans@avans.nl

\vspace{1em}

\noindent \textbf{Independent Examiner:}\\
Unknown at the moment

\vspace{1em}

\noindent \textbf{Executing Party:}\\
Seger Sars\\
seger.sars@topic.nl\\
Student number: 2184122\\
\\
and\\
\\
Wouter Boerenkamps\\
wouter.boerenkamps@topic.nl\\
Student number: 2171721

\newpage

\section*{Version Control}
\begin{table}[H]
    \begin{center}
        \begin{tabular}{|c|l|c|}
            \hline
            Version & Description & Date \\
            \hline
            0.1 & Setup initial document & 07-02-2025 \\
            \hline
        \end{tabular}
        \caption{Version control table}
    \end{center}
\end{table}
\newpage

\tableofcontents

\section{Introduction}
This research document is for the graduation internship Stewart Platform project at Topic Embedded systems. 
For more detailed information about the project see the Plan of Attack \cite{Plan_of_Attack}.

\newpage

\section{Image Transferring}
\subsection{Introduction}
The development board used for this project is the Miami ZU9.
This board has a CPU, GPU, FPGA and Real-Time processor on board.
This project needs fast real-time image processing and the FPGA is a possible choice for this.
The goal of this chapter is to understand how to transfer images from the CPU to the FPGA and back, and what the limitations are of this transfer.

\subsection{Miami ZU9 architecture}
The Miami ZU9 is a processing board made by Topic Embedded Systems. 
It has a Xilinx Zynq Ultrascale+ MPSoC ZU9EG on board, where the CPU, GPU, and Real-Time processor are located, also referred to as the Processing System (PS).
The FPGA is also located on the board, and is referred to as the Programmable Logic (PL).
\bigskip
All the processing units are connected to each other and to the PL through a multi-layered Arm Advanced Microprocessor Bus Architecture (AMBA) AXI interconnect.
The interconnect is non-blocking and supports multiple simultaneous master-slave transactions.
The interconnect is designed with latency sensitive masters, such as the Arm CPU, having the shortest paths to memory, and bandwidth critical masters, such as the potential PL masters, having high throughput connections to the slaves with which they need to communicate.
Traffic through the interconnect can be regulated through the Quality of Service (QoS) block in the interconnect.
The QoS feature is used to regulate traffic generated by the CPU, DMA controller, and a combined entity representing the masters in the IOP (I/O Peripherals).

\subsection{Data flow}
There is a single USB port present on the board, which is connected to the CPU.
The camera will be connected to this USB port, which means if the FPGA needs to process the image, the image needs to be transferred from the CPU to the FPGA.

The data flow for this possible solution is as follows:
\begin{enumerate}
    \item The camera captures an image and sends it to the CPU.
    \item The CPU decodes it and sends the image to the FPGA.
    \item The FPGA processes the image.
    \item Then there are two options: The FPGA sends the processed image out to a connected screen, or the FPGA sends the processed image back to the CPU which then sends it to a connected screen.
\end{enumerate}
The main difference is a need for a display logic in the FPGA or a bi-directional image transfer between the CPU and FPGA.
The assumption for this research chapter is that when the image is sent back to the CPU it is not difficult to send it to a connected screen.

\subsection{Available data paths}
The Miami ZU9 has a few interfaces that can be used to transfer data between the CPU and FPGA, which are listed in appendix \ref{sec:appendixPS-PL_interface}.
The most interesting interfaces for this research are:
\begin{itemize}
    \item The High Performance (HP) AXI interfaces from PL to PS DDR.
    \item The High Performance (HP) AXI interfaces from PS to PL.
\end{itemize}
The HP AXI interfaces are the fastest interfaces available on the board, and are therefore the most interesting for this research. 
The interface from PL to PS DDR can be used by the PL to retrieve data from the DDR memory, and the interface from PS to PL can be used by the PS to actively send data to the PL.
So the PL either retrieves the data or gets the data pushed to it.
????By speaking with Niek at Topic, it is assumed that the PL reading memory from the DDR is slower than the CPU pushing data to the PL.?????(Ik weet nog niet zo goed hoe ik dit moet gaan onderzoeken zonder daadwerkelijk de opties te gaan bouwen, ik hoop dat ik dit misschien ergens online kan vinden.)




\newpage

\section{List of Figures}

\section{List of Tables}

\section{References}
\printbibliography

\newpage

\section{Appendices}
\appendix
\section{PS-PL Interface} \label{sec:appendixPS-PL_interface}
Data from the datasheet\cite{ZU9EG_datasheet}:\\
\noindent\textbf{AMBA AXI4 interfaces for primary data communication:}
\begin{itemize}
    \item Six 128-bit/64-bit/32-bit High Performance (HP) Slave AXI interfaces from PL to PS.
        \begin{itemize}
            \item Four 128-bit/64-bit/32-bit HP AXI interfaces from PL to PS DDR.
            \item Two 128-bit/64-bit/32-bit high-performance coherent (HPC) ports from PL to cache coherent interconnect (CCI).
        \end{itemize}
    \item Two 128-bit/64-bit/32-bit HP Master AXI interfaces from PS to PL.
    \item One 128-bit/64-bit/32-bit interface from PL to RPU in PS (PL\_LPD) for low latency access to OCM.
    \item One 128-bit/64-bit/32-bit AXI interface from RPU in PS to PL (LPD\_PL) for low latency access to PL.
    \item One 128-bit AXI interface (ACP port) for I/O coherent access from PL to Cortex-A53 cache memory.\\
        This interface provides coherency in hardware for Cortex-A53 cache memory.
    \item One 128-bit AXI interface (ACE Port) for Fully coherent access from PL to Cortex-A53.\\
        This interface provides coherency in hardware for Cortex-A53 cache memory and the PL.
\end{itemize}


\section{Second Appendix} \label{sec:appendixB}
This is Appendix B.

\end{document}
