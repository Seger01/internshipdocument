\documentclass{article}

% Define the version command
\makeatletter
\newcommand{\version}[1]{\def\@version{#1}}
\makeatother

\title{Requirements Document}
\author{Seger Sars and Wouter Boerenkamps}
\date{\today}
\version{0.1}

\input{document_template.tex}

\begin{document}

\maketitle

\newpage

\noindent \textbf{Client:}\\
Topic Embedded Systems\\
Engineering department\\
Materiaalweg 4, 5681 RJ Best\\
+31 499336979\\

\vspace{1em}

\noindent \textbf{Company Supervisor:}\\
Dirk van den Heuvel\\
dirk.van.den.heuvel@topic.nl\\
Position: Product Manager and Principal Consultant at TOPIC Embedded Systems\\
\\
and\\
\\
Britta Claes\\
britta.claes@topic.nl\\
Position: Business Manager, People Manager, and Account Manager

\vspace{1em}

\noindent \textbf{Educational Institution:}\\
Avans University of Applied Sciences\\
Academy for Industry and Informatics\\
Onderwijsboulevard 215\\
5223 DE 's-Hertogenbosch

\vspace{1em}

\noindent \textbf{Academic Supervisor:}\\
Arthur Kluitmans\\
atjm.kluitmans@avans.nl

\vspace{1em}

\noindent \textbf{Independent Examiner:}\\
Unknown at the moment

\vspace{1em}

\noindent \textbf{Executing Party:}\\
Seger Sars\\
seger.sars@topic.nl\\
Student number: 2184122\\
\\
and\\
\\
Wouter Boerenkamps\\
wouter.boerenkamps@topic.nl\\
Student number: 2171721

\newpage

\section*{Version Control}

\begin{tabular}{|c|l|c|}
    \hline
    Version & Description & Date \\
    \hline
    0.1 & Setup initial document & 04-02-2025 \\
    \hline
\end{tabular}

\newpage

\tableofcontents

\newpage

\section{Project}
\subsection{Problem Analysis} As described in section % \ref{project-background},
the current version of the project is a functional Stewart platform that uses a
touchpad sensor to determine the ball's position. The system is controlled by an
STM32 microcontroller, which utilizes an inverse kinematics lookup table to
operate the motors via motor drivers.

However, the touchpad sensor introduces significant latency, which negatively
impacts the systemâ€™s responsiveness and performance. This limitation affects the
accuracy and real-time capabilities of the platform. Topic has researched the
possibility of replacing the touchpad with a camera-based machine vision system
to reduce latency and improve tracking precision.

Additionally, there is a need to migrate the current demonstration setup from
the STM32 microcontroller to the Miami Plus ZU9 board.
the project will explore communication options between the CPU and the FPGA,
particularly through the built-in DMA module, to optimize data transfer.

\subsection{Problem Definition} 
%Review: formal english so no contractions like ball's and the entire sentence it is in does not read well because of the large amount of comma's
%Review2: This entire subsection does not really include a problem definition, it is more of a continuation of the problem analysis or project ojective

To enhance the current setup, this project will
integrate a previously selected camera to detect the ball's position, speed, and
direction, improving platform control. Additionally, the existing STM32-based
implementation is migrated to the Miami Plus ZU9 board. In this new
configuration, the FPGA will serve as the primary controller for machine vision
processing and as the interface between the board and the motor controllers.

These functionalities must be integrated and managed by a custom
Linux distribution, which will combine the various components and enable
demonstration management via a web interface.

\subsection{Objective}
The Objective of this project is to gain more knowledge about machine vision and motor control using the FPGA 
and to improve the current setup to reduce latency and improve overall performance.
\subsection{Final Result}
The final result of this project is a functional stewart platform using the Miami Plus ZU9.
Where the FPGA is used to 
%Review: quite empty
\newpage

\section{Requirement Template}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Template} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & Template. \\ \hline
        \textbf{Reasoning} & Template. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\section{Functional Requirements}
\subsection{Must have}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Real-Time video capture} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system captures video in Real-Time. \\ \hline
        \textbf{Reasoning} & Real-Time video capture is needed to feed into the ball detection system. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Ball detection} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system is able to detect the position and speed vector of the ball in real time. \\ \hline
        \textbf{Reasoning} & To accuratly control the ball position the position and speed vector must be retrieved from the video feed. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Platform detection} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system is able to detect the platform of the stewart platform\\ \hline
        \textbf{Reasoning} & To accurately determine the location of the ball on the platform, the platform must be isolated from the full view. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Platform calibration} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The platform must be calibrated using the limit switches on each motor\\ \hline
        \textbf{Reasoning} & To know the start values of each motor the system must be calibrated using the limit switches. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}
%TODO: how much latency or how functional system
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Low latency} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system has a low response latency. \\ \hline
        \textbf{Reasoning} & To be able to adequately respond to movement of the ball the system needs a low response latency. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}
%TODO: potentiele eis
% \begin{table}[H]
%     \renewcommand{\arraystretch}{1.3}
%     \begin{tabular}{|l|p{10cm}|}
%         \hline
%         \rowcolor{gray!50}
%         \textbf{????} & \textbf{DMA communication} \\ \hline
%         \textbf{Date} & 06/02/2025 \\ \hline
%         \textbf{Status} & Draft \\ \hline
%         \textbf{Description} & The communication between the CPU and FPGA happens through a DMA interface. \\ \hline
%         \textbf{Reasoning} & Topic wants to use the DMA interface???????????????????????????????????????????????????. \\ \hline
%         \textbf{Dependent on requirements} & None. \\ \hline
%     \end{tabular}
% \end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Hardware acceleration} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system uses a form of hardware acceleration for the detection of the ball. \\ \hline
        \textbf{Reasoning} & If the ball detection would be done in the CPU or microcontroller it would be too slow to reach response latency requirements. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

% \begin{table}[H]
%     \renewcommand{\arraystretch}{1.3}
%     \begin{tabular}{|l|p{10cm}|}
%         \hline
%         \rowcolor{gray!50}
%         \textbf{????} & \textbf{video transfer} \\ \hline
%         \textbf{Date} & 06/02/2025 \\ \hline
%         \textbf{Status} & Draft \\ \hline
%         \textbf{Description} & The system is able to send the captured video to the required hardware for processing. \\ \hline
%         \textbf{Reasoning} & This way, the required hardware is able to use the video for further processing. \\ \hline
%         \textbf{Dependent on requirements} & None. \\ \hline
%     \end{tabular}
% \end{table}


\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Inverse Kinematics} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system uses Inverse Kinematics to calculate the new motor positions based on the wanted platform position. \\ \hline
        \textbf{Reasoning} & The system needs a way to calculate at which angles the stepper motors have to be to orient a platform in a certain way, which can be done effectively with inverse kinematics. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Real-Time graphical process monitoring} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system shows the graphical processing steps to inform the user how the ball is located. \\ \hline
        \textbf{Reasoning} & The system functions as a demonstration setup so being able to see how it works is very important. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Real-Time control system monitoring} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system show the pid values and the pattern it intends to follow through a linux application. \\ \hline
        \textbf{Reasoning} & The system functions as a demonstration setup so being able to see how it works is very important. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Linux integration} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The entire system must function under a custom Linux distribution. \\ \hline
        \textbf{Reasoning} & The Linux OS will handle any networking functionality and system startup actions. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{User control: ball pattern} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The ball pattern can be set using a linux user interface.\\ \hline
        \textbf{Reasoning} & This way the user can show the adaptibility and scalability of the platform. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{User control: operating mode} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system operating mode (off,on,homing,debug/manual,running ,freeze) can be set using a linux user interface.\\ \hline
        \textbf{Reasoning} & This way the user can easily operate the demonstration. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{ID} & \textbf{Platform Movement} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The platform must be able to move in multiple directions to adjust the ball's position accurately based on the platform's angle. \\ \hline
        \textbf{Reasoning} & This ensures the ball can be positioned and controlled in accordance with the required platform angles and movement parameters. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\subsection{Should have}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Data logging} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system logs important performance data on a file within the linux environment and by choice on a console directly. \\ \hline
        \textbf{Reasoning} & To be able to diagnose and evaluate the system accurate performance metrics have to be collected. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}




\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Light condition changes} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system is able to adapt to slight lighting changes. \\ \hline
        \textbf{Reasoning} & When lighting changes it should not affect the platform performance \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Smooth motion} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The platform of the Stewart platform moves in smooth motions. \\ \hline
        \textbf{Reasoning} & The platform should move in smooth motions to allow the ball to move in stable motions and protect the mechanical hardware from too harsh movements. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\subsection{Could have}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Web interface: monitoring} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The PID and current path are displayed in a web interface.\\ \hline
        \textbf{Reasoning} & A web interface can displayed remotely and therefor be used more easily.\\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Web interface: controlling platform} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The web interface can be used to controle the platform operating mode\\ \hline
        \textbf{Reasoning} & Using a web interface the application can be controled remotely and seperatly from the demonstration setup.\\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}


\subsection{Won't have}
\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Multi-Camera support} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The system is able to use multiple cameras for redundancy and 3D tracking. \\ \hline
        \textbf{Reasoning} & Multi-camera support makes the camera's in the system more redundant and more accurate. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Template} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & Template. \\ \hline
        \textbf{Reasoning} & Template. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\newpage

\section{Technical Requirements}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Camera specification} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The camera has a resolution of 1080 x 1920 and framerate of 60 frames per second. The 
        The camera is also supported by the Video4Linux \cite{Video4Linux} driver.\\ \hline

        \textbf{Reasoning} & Template. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Ball detection hardware} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The ball detection has to happen in the FPGA or in the GPU present in the chip. \\ \hline
        \textbf{Reasoning} & The ball detection algorithm needs to make use of hardware acceleration to have a low latency and high throughput. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Image processing latency} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & Each frame needs to be processed withing 16.666ms. \\ \hline
        \textbf{Reasoning} & Each frame needs to be processed before the next frame is retrieved from the camera. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{FPGA motor interface} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The FPGA has ???? motor interface. \\ \hline
        \textbf{Reasoning} & The FPGA has this interface for ????. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{FPGA Motor driving precision} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The FPGA motor driver has an accuracy of 0.5 degrees. \\ \hline
        \textbf{Reasoning} & To have accurate control of the platform the motor driver needs 0.5 degrees of accuracy. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Motion smoothing} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The FPGA or maybe the realtime processor includes a trapezoidal velocity profile to minimize jerking during rapid movements. \\ \hline
        \textbf{Reasoning} & The motion needs to be smooth for the stability of the platform and minimize mechanical stress. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Linux distribution} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & The Linux distribution used is a fork/extension of the distribution managed by Topic \cite{TopicLinuxDistro}. \\ \hline
        \textbf{Reasoning} & The developed system and modules need to be capable of begin integrated into existing Topic software. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}

\begin{table}[H]
    \renewcommand{\arraystretch}{1.3}
    \begin{tabular}{|l|p{10cm}|}
        \hline
        \rowcolor{gray!50}
        \textbf{????} & \textbf{Code standards} \\ \hline
        \textbf{Date} & 06/02/2025 \\ \hline
        \textbf{Status} & Draft \\ \hline
        \textbf{Description} & All code must adhere to the coding guideline of Topic. \\ \hline
        \textbf{Reasoning} & The code produced must be usable for Topic. \\ \hline
        \textbf{Dependent on requirements} & None. \\ \hline
    \end{tabular}
\end{table}


\newpage

\section{Project Boundaries}


\newpage

\section{List of Figures}

\section{List of Tables}

\section{Appendices}



\section{References}
% \bibliographystyle{apalike}  % or use "abbrv", "unsrt", or "apalike"
\printbibliography

\end{document}
